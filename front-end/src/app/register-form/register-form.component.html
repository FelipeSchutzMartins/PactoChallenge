<div class="parent">
    @if (!isSuccessful) {
        <form
            name="form"
            (ngSubmit)="f.form.valid && onSubmit()"
            #f="ngForm"
            novalidate
        >
            @if (registerAs == 'Employer') {
                <div class="form-group">
                    <label for="companyName">Nome da empresa</label>
                    <input
                        type="text"
                        class="form-control"
                        name="companyName"
                        [(ngModel)]="form.companyName"
                        required
                        minlength="3"
                        maxlength="30"
                        #companyName="ngModel"
                        [ngClass]="{ 'is-invalid': f.submitted && companyName.errors }"
                    />
                    @if (companyName.errors && f.submitted) {
                        <div class="invalid-feedback">
                            @if (companyName.errors['required']) {
                                <div>Nome da empresa é obrigatório</div>
                            }
                            @if (companyName.errors['minlength']) {
                                <div>Nome da empresa deve ter no mínimo 3 caracteres</div>
                            }
                            @if (companyName.errors['maxlength']) {
                                <div>Nome da empresa deve ter no máximo 20 caracteres</div>
                            }
                        </div>
                    }
                </div>
            }
            @if (registerAs == 'Candidate') {
                <div class="form-group">
                    <label for="name">Nome</label>
                    <input
                        type="text"
                        class="form-control"
                        name="name"
                        [(ngModel)]="form.name"
                        required
                        minlength="3"
                        maxlength="30"
                        #name="ngModel"
                        [ngClass]="{ 'is-invalid': f.submitted && name.errors }"
                    />
                    @if (name.errors && f.submitted) {
                        <div class="invalid-feedback">
                            @if (name.errors['required']) {
                                <div>Nome é obrigatório</div>
                            }
                            @if (name.errors['minlength']) {
                                <div>Nome deve ter no mínimo 3 caracteres</div>
                            }
                            @if (name.errors['maxlength']) {
                                <div>Nome deve ter no máximo 30 caracteres</div>
                            }
                        </div>
                    }
                </div>
                <div class="form-group">
                    <label for="surname">Sobrenome</label>
                    <input
                        type="text"
                        class="form-control"
                        name="surname"
                        [(ngModel)]="form.surname"
                        required
                        minlength="3"
                        maxlength="30"
                        #surname="ngModel"
                        [ngClass]="{ 'is-invalid': f.submitted && surname.errors }"
                    />
                    @if (surname.errors && f.submitted) {
                        <div class="invalid-feedback">
                            @if (surname.errors['required']) {
                                <div>Sobrenome é obrigatório</div>
                            }
                            @if (surname.errors['minlength']) {
                                <div>Sobrenome deve ter no mínimo 3 caracteres</div>
                            }
                            @if (surname.errors['maxlength']) {
                                <div>Sobrenome deve ter no máximo 30 caracteres</div>
                            }
                        </div>
                    }
                </div>
            }
            <div class="form-group">
                <label for="username">Email</label>
                <input
                type="email"
                class="form-control"
                name="username"
                [(ngModel)]="form.username"
                required
                username
                #email="ngModel"
                [ngClass]="{ 'is-invalid': f.submitted && email.errors }"
                />
                @if (email.errors && f.submitted) {
                    <div class="invalid-feedback">
                        @if (email.errors['required']) {
                            <div>E-mail é obrigatório</div>
                        }
                        @if (email.errors['email']) {
                            <div>Email deve ser válido</div>
                        }
                    </div>
                }
            </div>
            <div class="form-group">
                <label for="password">Senha</label>
                <input
                type="password"
                class="form-control"
                name="password"
                [(ngModel)]="form.password"
                required
                minlength="6"
                #password="ngModel"
                [ngClass]="{ 'is-invalid': f.submitted && password.errors }"
                />
                @if (password.errors && f.submitted) {
                    <div class="invalid-feedback">
                        @if (password.errors['required']) {
                            <div>Senha é obrigatória</div>
                        }
                        @if (password.errors['minlength']) {
                            <div>Senha deve ter no mínimo 6 caracteres</div>
                        }
                    </div>
                }
            </div>
            <div class="form-group">
                <button class="btn btn-primary btn-block">Cadastrar</button>
            </div>

            @if (f.submitted && isSignUpFailed) {
                <div class="alert alert-warning">
                    Cadastro falhou! motivo: <br />{{ errorMessage }}
                </div>
            }
        </form>
    } @else {
        <div class="alert alert-success">Cadastro finalizado com sucesso!</div>
    }
</div>